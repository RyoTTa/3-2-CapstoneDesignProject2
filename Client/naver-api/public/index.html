<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"
    />
    <link rel="stylesheet" href="./nav/nav_style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css?family=Roboto+Mono:100,300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <title>Click Web</title>
    <!--<script src="../src/capture.js"></script>-->
  </head>
  <body>
    <div id="root"></div>
    <div id="map" style="width: 100%; height: 100vh;"></div>
    <script
      type="text/javascript"
      src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=pg43l9dp5c"
    ></script>

    <script>
      // boundary
      var bound = new naver.maps.LatLngBounds(
        new naver.maps.LatLng(35.721397, 128.300916),
        new naver.maps.LatLng(35.973666, 128.764745)
      );

      // 맵 생성
      var map = new naver.maps.Map("map", {
        minZoom: 11, // 읍면동 레벨
        center: new naver.maps.LatLng(35.889845, 128.6105),
        zoom: 17,
        maxBounds: bound,
        //mapTypeId: "normal",
      });

      var contentEl = $(
        '<div class="iw_inner" style="width:50px;height:100%;position:absolute;top:0;left:0;z-index:1000;background-color:#fff;border:solid 2px #CFD2D5;">' +
          "<h3>Map States</h3>" +
          "</div>"
      );

      contentEl.appendTo(map.getElement());

      var HOME_PATH = window.HOME_PATH || ".";

      // 마커 위도 경도
      var latLngs = [
        new naver.maps.LatLng(35.88689, 128.608494),
        new naver.maps.LatLng(35.888154, 128.6109),
        new naver.maps.LatLng(35.88814, 128.611388),
      ];

      // 숫자를 세자리 수로 변경 ex:1 => 001
      function pad(n) {
        var str = "00" + n;
        str = str.slice(-3);

        return str;
      }

      var markerList = [],
        urlArr = [];

      for (var i = 0, ii = latLngs.length; i < ii; i++) {
        var icon = {
            url: HOME_PATH + "/marker_img/sp_pins_spot_v3.png",
            size: new naver.maps.Size(24, 37),
            anchor: new naver.maps.Point(12, 37),
            origin: new naver.maps.Point(i * 29, 0),
          },
          marker = new naver.maps.Marker({
            position: latLngs[i],
            map: map,
            icon: icon,
          });

        var dataUrl = "./getData.html?cam_id=" + pad(i + 1);

        marker.set("seq", i);

        markerList.push(marker);
        urlArr.push(dataUrl);

        marker.addListener("mouseover", onMouseOver);
        marker.addListener("mouseout", onMouseOut);

        icon = null;
        marker = null;
      }

      function onMouseOver(e) {
        var marker = e.overlay,
          seq = marker.get("seq");

        marker.setIcon({
          url: HOME_PATH + "/marker_img/sp_pins_spot_v3_over.png",
          size: new naver.maps.Size(24, 37),
          anchor: new naver.maps.Point(12, 37),
          origin: new naver.maps.Point(seq * 29, 50),
        });
      }

      function onMouseOut(e) {
        var marker = e.overlay,
          seq = marker.get("seq");

        marker.setIcon({
          url: HOME_PATH + "/marker_img/sp_pins_spot_v3.png",
          size: new naver.maps.Size(24, 37),
          anchor: new naver.maps.Point(12, 37),
          origin: new naver.maps.Point(seq * 29, 0),
        });
      }

      for (var i = 0, ii = markerList.length; i < ii; i++) {
        naver.maps.Event.addListener(
          markerList[i],
          "click",
          getClickHandler(i)
        );
      }

      function getClickHandler(seq) {
        return function (e) {
          var marker = markerList[seq],
            url = urlArr[seq];
          window.open(url);
          //xhr.open("GET", url, true);
          //xhr.send();
        };
      }

      // 메뉴 바
      /*
      var navBar = $(
        '<div class="iw_inner" style="width:350px;position:absolute;top:0;left:0;z-index:1000;background-color:#fff;border:solid 1px #333;">' +
          "<h3>hi</h3>" +
          '<p style="font-size:14px;">zoom : <em class="zoom">' +
          map.getZoom() +
          "</em></p>" +
          '<p style="font-size:14px;">centerPoint : <em class="center">' +
          map.getCenterPoint() +
          "</em></p>" +
          "</div>"
      );
      navBar.appendTo(map.getElement());
      */

      // 경북대 테두리
      var knu = new naver.maps.Polygon({
        map: map,
        paths: [
          [
            new naver.maps.LatLng(35.8958183, 128.6131888),
            new naver.maps.LatLng(35.8956304, 128.6138721),
            new naver.maps.LatLng(35.8953707, 128.6142),
            new naver.maps.LatLng(35.8953587, 128.6141994),
            new naver.maps.LatLng(35.8948959, 128.6136341),
            new naver.maps.LatLng(35.8948802, 128.6136327),
            new naver.maps.LatLng(35.8937865, 128.6141451),
            new naver.maps.LatLng(35.8932661, 128.6143972),
            new naver.maps.LatLng(35.8925697, 128.6147821),
            new naver.maps.LatLng(35.8902892, 128.6161125),
            new naver.maps.LatLng(35.8902164, 128.6161433),
            new naver.maps.LatLng(35.8901686, 128.6161527),
            new naver.maps.LatLng(35.8898068, 128.6161393),
            new naver.maps.LatLng(35.8897351, 128.616146),
            new naver.maps.LatLng(35.8894352, 128.6162734),
            new naver.maps.LatLng(35.8889018, 128.6167844),
            new naver.maps.LatLng(35.8856031, 128.6152957),
            new naver.maps.LatLng(35.8856074, 128.6152971),
            new naver.maps.LatLng(35.885414, 128.6150986),
            new naver.maps.LatLng(35.8851619, 128.6146292),
            new naver.maps.LatLng(35.8850706, 128.6140753),
            new naver.maps.LatLng(35.8855129, 128.6138648),
            new naver.maps.LatLng(35.8861952, 128.6129005),
            new naver.maps.LatLng(35.8863354, 128.6099434),
            new naver.maps.LatLng(35.8857411, 128.609926),
            new naver.maps.LatLng(35.8856987, 128.6098911),
            new naver.maps.LatLng(35.8856998, 128.6096189),
            new naver.maps.LatLng(35.8856443, 128.6094834),
            new naver.maps.LatLng(35.885452, 128.6094821),
            new naver.maps.LatLng(35.8853771, 128.6094472),
            new naver.maps.LatLng(35.8853521, 128.6094043),
            new naver.maps.LatLng(35.8854325, 128.6088102),
            new naver.maps.LatLng(35.8854922, 128.6086787),
            new naver.maps.LatLng(35.885778, 128.608322),
            new naver.maps.LatLng(35.8857845, 128.6082348),
            new naver.maps.LatLng(35.8861474, 128.6083233),
            new naver.maps.LatLng(35.8862984, 128.6076112),
            new naver.maps.LatLng(35.8864375, 128.6076099),
            new naver.maps.LatLng(35.8864538, 128.6071566),
            new naver.maps.LatLng(35.8864766, 128.6070386),
            new naver.maps.LatLng(35.8865831, 128.6055862),
            new naver.maps.LatLng(35.8866385, 128.6055794),
            new naver.maps.LatLng(35.8866798, 128.6049035),
            new naver.maps.LatLng(35.8866983, 128.6048445),
            new naver.maps.LatLng(35.8883607, 128.6039755),
            new naver.maps.LatLng(35.8884987, 128.6039138),
            new naver.maps.LatLng(35.8895428, 128.6039634),
            new naver.maps.LatLng(35.8898837, 128.6044957),
            new naver.maps.LatLng(35.890126, 128.604955),
            new naver.maps.LatLng(35.8905432, 128.6058086),
            new naver.maps.LatLng(35.8907594, 128.6062237),
            new naver.maps.LatLng(35.8921981, 128.6091146),
            new naver.maps.LatLng(35.8923133, 128.6092702),
            new naver.maps.LatLng(35.8923839, 128.6093801),
          ],
        ],
        strokeColor: "black",
        strokeOpacity: 0.6,
        strokeWeight: 3,
      });

      /*
      // 대구 테두리
      var Daegu = new naver.maps.Polygon({
        map: map,
        paths: [
          [
            new naver.maps.LatLng(36.0155733, 128.6960412),
            new naver.maps.LatLng(36.0032279, 128.7268779),
            new naver.maps.LatLng(35.9853614, 128.7309739),
            new naver.maps.LatLng(35.9728686, 128.7462102),
            new naver.maps.LatLng(35.9295961, 128.7366945),
            new naver.maps.LatLng(35.9067465, 128.7599251),
            new naver.maps.LatLng(35.866058, 128.7597675),
            new naver.maps.LatLng(35.8512982, 128.7385723),
            new naver.maps.LatLng(35.85686, 128.7218141),
            new naver.maps.LatLng(35.8359809, 128.7250118),
            new naver.maps.LatLng(35.8263781, 128.7085255),
            new naver.maps.LatLng(35.8070139, 128.7174619),
            new naver.maps.LatLng(35.7901504, 128.6823415),
            new naver.maps.LatLng(35.7564327, 128.6960775),
            new naver.maps.LatLng(35.7216617, 128.683266),
            new naver.maps.LatLng(35.7031625, 128.6201766),
            new naver.maps.LatLng(35.7439735, 128.6090612),
            new naver.maps.LatLng(35.7310761, 128.5888805),
            new naver.maps.LatLng(35.7379457, 128.5816771),
            new naver.maps.LatLng(35.7362167, 128.5642024),
            new naver.maps.LatLng(35.7114429, 128.5286892),
            new naver.maps.LatLng(35.6937883, 128.5356596),
            new naver.maps.LatLng(35.6832618, 128.5298805),
            new naver.maps.LatLng(35.6729581, 128.507685),
            new naver.maps.LatLng(35.6391973, 128.5053628),
            new naver.maps.LatLng(35.6384241, 128.4465993),
            new naver.maps.LatLng(35.6216381, 128.43101),
            new naver.maps.LatLng(35.6250996, 128.4227538),
            new naver.maps.LatLng(35.6065398, 128.3823989),
            new naver.maps.LatLng(35.6108809, 128.3717476),
            new naver.maps.LatLng(35.6232489, 128.3933059),
            new naver.maps.LatLng(35.6440742, 128.398697),
            new naver.maps.LatLng(35.6768813, 128.3596807),
            new naver.maps.LatLng(35.7040156, 128.3517967),
            new naver.maps.LatLng(35.7087012, 128.3588782),
            new naver.maps.LatLng(35.6958418, 128.4122017),
            new naver.maps.LatLng(35.7048945, 128.4321466),
            new naver.maps.LatLng(35.725598, 128.4318159),
            new naver.maps.LatLng(35.7483526, 128.3912469),
            new naver.maps.LatLng(35.7600868, 128.3834692),
            new naver.maps.LatLng(35.8093545, 128.4208295),
            new naver.maps.LatLng(35.8059355, 128.4664271),
            new naver.maps.LatLng(35.8189025, 128.4798359),
            new naver.maps.LatLng(35.8396161, 128.468946),
            new naver.maps.LatLng(35.8466568, 128.4500015),
            new naver.maps.LatLng(35.8528346, 128.3835101),
            new naver.maps.LatLng(35.8999265, 128.3989766),
            new naver.maps.LatLng(35.9013013, 128.4074346),
            new naver.maps.LatLng(35.9280408, 128.4249016),
            new naver.maps.LatLng(35.9350416, 128.4503381),
            new naver.maps.LatLng(35.9431494, 128.4541552),
            new naver.maps.LatLng(35.9344393, 128.4764188),
            new naver.maps.LatLng(35.9003086, 128.467786),
            new naver.maps.LatLng(35.8947957, 128.4751758),
            new naver.maps.LatLng(35.8979803, 128.4905824),
            new naver.maps.LatLng(35.8871588, 128.5022418),
            new naver.maps.LatLng(35.9061093, 128.5068262),
            new naver.maps.LatLng(35.9236223, 128.5294652),
            new naver.maps.LatLng(35.9383554, 128.535366),
            new naver.maps.LatLng(35.980238, 128.5288778),
            new naver.maps.LatLng(35.9607414, 128.5534071),
            new naver.maps.LatLng(35.9722248, 128.5568131),
            new naver.maps.LatLng(35.9859057, 128.6028925),
            new naver.maps.LatLng(36.0067373, 128.6174858),
            new naver.maps.LatLng(36.0155733, 128.6960412),
          ],
        ],
        strokeColor: "black",
        strokeOpacity: 0.6,
        strokeWeight: 3,
      });
      */
    </script>
  </body>
</html>
